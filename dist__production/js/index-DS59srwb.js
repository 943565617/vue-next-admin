import{p as e}from"./print-js-CWJF5bA-.js";import{t}from"./js-table2excel-CGKGHsNh.js";import{S as a}from"./sortablejs-brRwdIwn.js";import{s as i}from"./pinia-CTGgt2hX.js";import{u as o,_ as l}from"./index-foLWFI6H.js";import{a as s}from"./element-plus-AyclcJdL.js";import{d as r,b as n,_ as p,k as c,ai as d,aq as m,o as h,c as g,Q as u,O as f,P as y,V as j,S as b,F as k,a9 as v,K as w,T as x,U as z,L as C,a as S,n as _}from"./@vue-5amejw8K.js";import"./@intlify-KwFOTgoq.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-Bq7HluqB.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-YR8FD5Tz.js";import"./nprogress-CwwpQnHY.js";import"./axios-XtWrBBVz.js";import"./qs-d0NUDaEV.js";import"./side-channel-ABGcfzWN.js";import"./get-intrinsic-Dcwdwnz4.js";import"./es-errors-Bza6HHKb.js";import"./has-symbols-BjfDv0FJ.js";import"./has-proto-DxUgyt-t.js";import"./function-bind-Ckw9YnhN.js";import"./hasown-DTGZhiFA.js";import"./call-bind-COXgxIYc.js";import"./set-function-length-CYeVTiyi.js";import"./define-data-property-DvIQPL4R.js";import"./es-define-property-DwRRhIwF.js";import"./gopd-CVOMcQVD.js";import"./has-property-descriptors-CDOEcoVi.js";import"./object-inspect-Da024_OR.js";import"./vue-i18n-agluwRAO.js";import"./vue-CBwmpGZq.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-WvDAhvPt.js";/* empty css                    */import"./lodash-es-EFZEm3Z2.js";import"./@vueuse-DWSxN83p.js";import"./@popperjs-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-BeASU03D.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";const V={class:"table-container"},$={class:"table-footer mt15"},L={class:"table-footer-tool"},N={class:"tool-box"},A=["data-key"],E=l(r({__name:"index",props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},printName:{type:String,default:()=>""}},emits:["delRow","pageChange","sortHeader"],setup(l,{expose:r,emit:E}){const I=l,U=E,q=n(),O=o(),{themeConfig:R}=i(O),H=p({page:{pageNum:1,pageSize:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),T=c((()=>!!I.config.isBorder)),B=c((()=>I.config)),D=c((()=>I.header.filter((e=>e.isCheck)))),K=e=>{e?I.header.forEach((e=>e.isCheck=!0)):I.header.forEach((e=>e.isCheck=!1)),H.checkListIndeterminate=!1},P=()=>{const e=I.header.filter((e=>e.isCheck)).length;H.checkListAll=e===I.header.length,H.checkListIndeterminate=e>0&&e<I.header.length},Q=e=>{H.selectlist=e},W=e=>{H.page.pageSize=e,U("pageChange",H.page)},F=e=>{H.page.pageNum=e,U("pageChange",H.page)},G=()=>{let t="",a="",i={};I.header.forEach((e=>{t+=`<th class="table-th">${e.title}</th>`})),I.data.forEach(((e,t)=>{i[t]||(i[t]=[]),I.header.forEach((a=>{"text"===a.type?i[t].push(`<td class="table-th table-center">${e[a.key]}</td>`):"image"===a.type&&i[t].push(`<td class="table-th table-center"><img src="${e[a.key]}" style="width:${a.width}px;height:${a.height}px;"/></td>`)})),a+=`<tr>${i[t].join("")}</tr>`})),e({printable:`<div style=display:flex;flex-direction:column;text-align:center><h3>${I.printName}</h3></div><table border=1 cellspacing=0><tr>${t}${a}</table>`,type:"raw-html",css:["//at.alicdn.com/t/c/font_2298093_rnp72ifj3ba.css","//unpkg.com/element-plus/dist/index.css"],style:"@media print{.mb15{margin-bottom:15px;}.el-button--small i.iconfont{font-size: 12px !important;margin-right: 5px;}}; .table-th{word-break: break-all;white-space: pre-wrap;}.table-center{text-align: center;}"})},J=()=>{if(H.selectlist.length<=0)return s.warning("请先选择要导出的数据");t(I.header,H.selectlist,`${R.value.globalTitle} ${(new Date).toLocaleString()}`)},X=()=>{U("pageChange",H.page)},M=()=>{_((()=>{const e=a.create(q.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const t=[];e.toArray().forEach((e=>{I.header.forEach((a=>{a.key===e&&t.push({...a})}))})),U("sortHeader",t)}})}))};return r({pageReset:()=>{H.page.pageNum=1,H.page.pageSize=10,U("pageChange",H.page)}}),(e,t)=>{const a=d("el-table-column"),i=d("el-image"),o=d("el-button"),s=d("el-popconfirm"),r=d("el-empty"),n=d("el-table"),p=d("el-pagination"),c=d("SvgIcon"),_=d("el-tooltip"),E=d("el-checkbox"),I=d("el-scrollbar"),O=d("el-popover"),R=m("loading");return h(),g("div",V,[u((h(),f(n,C({data:l.data,border:T.value},e.$attrs,{"row-key":"id",stripe:"",style:{width:"100%"},onSelectionChange:Q}),{empty:y((()=>[j(r,{description:"暂无数据"})])),default:y((()=>[l.config.isSelection?(h(),f(a,{key:0,type:"selection","reserve-selection":!0,width:"30"})):b("",!0),l.config.isSerialNo?(h(),f(a,{key:1,type:"index",label:"序号",width:"60"})):b("",!0),(h(!0),g(k,null,v(D.value,((e,t)=>(h(),f(a,{key:t,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title},{default:y((t=>["image"===e.type?(h(),f(i,{key:0,style:w({width:`${e.width}px`,height:`${e.height}px`}),src:t.row[e.key],"zoom-rate":1.2,"preview-src-list":[t.row[e.key]],"preview-teleported":"",fit:"cover"},null,8,["style","src","preview-src-list"])):(h(),g(k,{key:1},[x(z(t.row[e.key]),1)],64))])),_:2},1032,["prop","width","label"])))),128)),l.config.isOperate?(h(),f(a,{key:2,label:"操作",width:"100"},{default:y((e=>[j(s,{title:"确定删除吗？",onConfirm:t=>{return a=e.row,void U("delRow",a);var a}},{reference:y((()=>[j(o,{text:"",type:"primary"},{default:y((()=>t[5]||(t[5]=[x("删除")]))),_:1})])),_:2},1032,["onConfirm"])])),_:1})):b("",!0)])),_:1},16,["data","border"])),[[R,l.config.loading]]),S("div",$,[j(p,{"current-page":H.page.pageNum,"onUpdate:currentPage":t[0]||(t[0]=e=>H.page.pageNum=e),"page-size":H.page.pageSize,"onUpdate:pageSize":t[1]||(t[1]=e=>H.page.pageSize=e),"pager-count":5,"page-sizes":[10,20,30],total:l.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:W,onCurrentChange:F},null,8,["current-page","page-size","total"]),S("div",L,[j(c,{name:"iconfont icon-dayin",size:19,title:"打印",onClick:G}),j(c,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:J}),j(c,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:X}),j(O,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:M},{reference:y((()=>[j(c,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})])),default:y((()=>[S("div",N,[j(_,{content:"拖动进行排序",placement:"top-start"},{default:y((()=>[j(c,{name:"fa fa-question-circle-o",size:17,class:"ml11",color:"#909399"})])),_:1}),j(E,{modelValue:H.checkListAll,"onUpdate:modelValue":t[2]||(t[2]=e=>H.checkListAll=e),indeterminate:H.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:K},null,8,["modelValue","indeterminate"]),j(E,{modelValue:B.value.isSerialNo,"onUpdate:modelValue":t[3]||(t[3]=e=>B.value.isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),j(E,{modelValue:B.value.isSelection,"onUpdate:modelValue":t[4]||(t[4]=e=>B.value.isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),j(I,null,{default:y((()=>[S("div",{ref_key:"toolSetRef",ref:q,class:"tool-sortable"},[(h(!0),g(k,null,v(l.header,(e=>(h(),g("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[t[6]||(t[6]=S("i",{class:"fa fa-arrows-alt handle cursor-pointer"},null,-1)),j(E,{modelValue:e.isCheck,"onUpdate:modelValue":t=>e.isCheck=t,size:"default",class:"ml12 mr8",label:e.title,onChange:P},null,8,["modelValue","onUpdate:modelValue","label"])],8,A)))),128))],512)])),_:1})])),_:1})])])])}}}),[["__scopeId","data-v-68682213"]]);export{E as default};
