import{d as a,b as e,k as t,e as r,c as s,a as i,F as n,a9 as l,aq as u,o as m,Q as o,V as d,P as f,W as p,a1 as h,n as y}from"./@vue-5amejw8K.js";import{u as g}from"./vue-router-Bq7HluqB.js";const v={class:"layout-padding layout-padding-unset layout-iframe"},c={class:"layout-padding-auto layout-padding-view"},I=["src","data-url"],O=a({__name:"iframes",props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>""},list:{type:Array,default:()=>[]}},setup(a){const O=a,k=e(),_=g(),b=t((()=>O.list.filter((a=>{var e;return null==(e=a.meta)?void 0:e.isIframeOpen})))),w=t((()=>_.path)),P=(a,e)=>{y((()=>{if(!k.value)return!1;k.value.forEach((t=>{t.dataset.url===a&&(t.onload=()=>{var a;(null==(a=e.meta)?void 0:a.isIframeOpen)&&e.meta.loading&&(e.meta.loading=!1)})}))}))};return r((()=>_.fullPath),(a=>{const e=O.list.find((e=>e.path===a));if(!e)return!1;e.meta.isIframeOpen||(e.meta.isIframeOpen=!0),P(a,e)}),{immediate:!0}),r((()=>O.refreshKey),(()=>{const a=O.list.find((a=>a.path===_.path));if(!a)return!1;a.meta.isIframeOpen&&(a.meta.isIframeOpen=!1),setTimeout((()=>{a.meta.isIframeOpen=!0,a.meta.loading=!0,P(_.fullPath,a)}))}),{deep:!0}),(e,t)=>{const r=u("loading");return m(),s("div",v,[i("div",c,[(m(!0),s(n,null,l(b.value,(e=>o((m(),s("div",{class:"w100",key:e.path,"element-loading-background":"white"},[d(h,{name:a.name},{default:f((()=>[o((m(),s("iframe",{src:e.meta.isLink,key:e.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":e.path,ref_for:!0,ref_key:"iframeRef",ref:k},null,8,I)),[[p,w.value===e.path]])])),_:2},1032,["name"])])),[[r,e.meta.loading]]))),128))])])}}});export{O as default};
