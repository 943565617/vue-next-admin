import{u as e,b as t,o as s}from"./vue-router-Bq7HluqB.js";import{s as i}from"./pinia-CTGgt2hX.js";import{d as l,u as o,e as n,_ as r}from"./index-foLWFI6H.js";import{d as a,b as m,_ as u,j as d,Z as p,e as c,ai as v,o as h,c as f,V as j,P as C,a as y,F as k,a9 as x,J as g,u as A,U as I,n as S}from"./@vue-5amejw8K.js";import"./vue-demi-Dq6ymT-8.js";import"./js-cookie-BXEMiIsG.js";import"./@element-plus-YR8FD5Tz.js";import"./nprogress-CwwpQnHY.js";import"./@intlify-KwFOTgoq.js";import"./axios-XtWrBBVz.js";import"./qs-d0NUDaEV.js";import"./side-channel-ABGcfzWN.js";import"./get-intrinsic-Dcwdwnz4.js";import"./es-errors-Bza6HHKb.js";import"./has-symbols-BjfDv0FJ.js";import"./has-proto-DxUgyt-t.js";import"./function-bind-Ckw9YnhN.js";import"./hasown-DTGZhiFA.js";import"./call-bind-COXgxIYc.js";import"./set-function-length-CYeVTiyi.js";import"./define-data-property-DvIQPL4R.js";import"./es-define-property-DwRRhIwF.js";import"./gopd-CVOMcQVD.js";import"./has-property-descriptors-CDOEcoVi.js";import"./object-inspect-Da024_OR.js";import"./element-plus-AyclcJdL.js";import"./lodash-es-EFZEm3Z2.js";import"./@vueuse-DWSxN83p.js";import"./@popperjs-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-BeASU03D.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./vue-i18n-agluwRAO.js";import"./vue-CBwmpGZq.js";import"./mitt-CNZ6avp8.js";import"./vue-grid-layout-WvDAhvPt.js";/* empty css                    */const H={class:"layout-columns-aside"},b=["onClick","onMouseenter","title"],L={class:"columns-vertical-title font12"},O=["href"],$={class:"columns-vertical-title font12"},_=r(a({__name:"columnsAside",setup(r){const a=m([]),_=m(),P=l(),M=o(),{routesList:w,isColumnsMenuHover:T,isColumnsNavHover:N}=i(P),{themeConfig:z}=i(M),D=e(),J=t(),R=u({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),V=e=>{S((()=>{(e=>{if(void 0===e)return!1;R.liIndex=e,_.value.style.top=`${a.value[e].offsetTop+R.difference}px`})(e)}))},W=e=>{const t=q(e);return t.children.length<=1?z.value.isCollapse=!0:z.value.isCollapse=!1,t},q=e=>{const t=e.split("/");let s={children:[]};return R.columnsAsideList.map(((e,i)=>{e.path===`/${t[1]}`&&(e.k=i,s.item={...e},s.children=[{...e}],e.children&&(s.children=e.children))})),s},B=e=>e.filter((e=>{var t;return!(null==(t=e.meta)?void 0:t.isHide)})).map((e=>((e=Object.assign({},e)).children&&(e.children=B(e.children)),e)));return d((()=>{(()=>{var e;R.columnsAsideList=B(w.value);const t=W(D.path);V(null==(e=t.item)?void 0:e.k),setTimeout((()=>{n.emit("setSendColumnsChildren",t)}),500)})(),n.on("restoreDefault",(()=>{R.liOldIndex=null,R.liOldPath=null}))})),p((()=>{n.off("restoreDefault",(()=>{}))})),s((e=>{const t=W(e.path);(e=>{R.routeSplit=e.split("/"),R.routeSplit.shift();const t=`/${R.routeSplit[0]}`,s=R.columnsAsideList.find((e=>e.path===t));if(!s)return!1;setTimeout((()=>{V(s.k)}),0)})(e.path),n.emit("setSendColumnsChildren",t)})),c([()=>z.value.columnsAsideStyle,T,N],(()=>{if("columnsRound"===z.value.columnsAsideStyle?R.difference=3:R.difference=0,T.value||N.value){if(R.liHoverIndex=R.liOldIndex,!R.liOldPath)return!1;n.emit("setSendColumnsChildren",q(R.liOldPath))}else R.liHoverIndex=null,n.emit("setSendColumnsChildren",q(D.path))}),{deep:!0}),(e,t)=>{const s=v("SvgIcon"),i=v("el-scrollbar");return h(),f("div",H,[j(i,null,{default:C((()=>[y("ul",{onMouseleave:t[0]||(t[0]=e=>(async()=>{if(!z.value.isColumnsMenuHoverPreload)return!1;await P.setColumnsNavHover(!1),setTimeout((()=>{T||N||n.emit("restoreDefault")}),100)})())},[(h(!0),f(k,null,x(R.columnsAsideList,((t,i)=>(h(),f("li",{key:i,onClick:e=>(async e=>{var t;let{path:s,redirect:i}=e;if(i)V(e.k),D.path.startsWith(i)?n.emit("setSendColumnsChildren",q(i)):J.push(i);else if(e.children){const e=q(s);if(Object.keys(e).length<=0)return!1;V(null==(t=e.item)?void 0:t.k),n.emit("setSendColumnsChildren",e)}else J.push(s);e.children?e.children.length>1&&(z.value.isCollapse=!1):z.value.isCollapse=!0})(t),onMouseenter:e=>((e,t)=>{if(!z.value.isColumnsMenuHoverPreload)return!1;let{path:s}=e;R.liOldPath=s,R.liOldIndex=t,R.liHoverIndex=t,n.emit("setSendColumnsChildren",q(s)),P.setColumnsMenuHover(!1),P.setColumnsNavHover(!0)})(t,i),ref_for:!0,ref:e=>{e&&(a.value[i]=e)},class:g({"layout-columns-active":R.liIndex===i,"layout-columns-hover":R.liHoverIndex===i}),title:e.$t(t.meta.title)},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?(h(),f("div",{key:0,class:g(A(z).columnsAsideLayout)},[j(s,{name:t.meta.icon},null,8,["name"]),y("div",L,I(e.$t(t.meta.title)&&e.$t(t.meta.title).length>=4?e.$t(t.meta.title).substr(0,"columns-vertical"===A(z).columnsAsideLayout?4:3):e.$t(t.meta.title)),1)],2)):(h(),f("div",{key:1,class:g(A(z).columnsAsideLayout)},[y("a",{href:t.meta.isLink,target:"_blank"},[j(s,{name:t.meta.icon},null,8,["name"]),y("div",$,I(e.$t(t.meta.title)&&e.$t(t.meta.title).length>=4?e.$t(t.meta.title).substr(0,"columns-vertical"===A(z).columnsAsideLayout?4:3):e.$t(t.meta.title)),1)],8,O)],2))],42,b)))),128)),y("div",{ref_key:"columnsAsideActiveRef",ref:_,class:g(A(z).columnsAsideStyle)},null,2)],32)])),_:1})])}}}),[["__scopeId","data-v-7e5ded27"]]);export{_ as default};
